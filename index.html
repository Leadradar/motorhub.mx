<!doctype html>
<html lang="es-MX">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MotoUrbano MX — Accesorios para tu moto</title>
  <meta name="description" content="Accesorios para tu moto con precios claros y soporte por WhatsApp. Devoluciones en 14 días." />
  <meta name="theme-color" content="#ffffff" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="MotoUrbano MX" />
  <meta property="og:description" content="Accesorios para tu moto." />
  <meta property="og:image" content="https://leadradar.github.io/motorhub.mx/img/hero.jpg" />

  <link rel="icon" href="favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
  <link rel="manifest" href="site.webmanifest" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700;800&display=swap" rel="stylesheet">

  <!-- Preload mínimo -->
  <link rel="preload" as="image" href="img/logo.png">

  <style>
    :root{
      --bg:#ffffff; --elev:#ffffff; --ink:#0b0b0b; --muted:#5d5d5d; --line:#e9e9e9;
      --accent:#cf0a0a;           /* rojo elegante */
      --accent-weak:#fbecec;      /* sombra/fondo rojo suave */
      --shadow:0 10px 30px rgba(0,0,0,.08);

      --header-pad-y:14px; --header-logo:84px; --header-title:22px; --header-h:220px;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    img{display:block;max-width:100%;height:auto;-webkit-user-drag:none;user-drag:none}
    a{color:inherit;text-decoration:none}
    .container{max-width:1200px;margin:0 auto;padding:0 20px}
    .grid{display:grid;gap:16px}
    @media(min-width:700px){.grid.cols-2{grid-template-columns:repeat(2,1fr)}}
    @media(min-width:900px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}.grid.cols-4{grid-template-columns:repeat(4,1fr)}.grid.cols-5{grid-template-columns:repeat(5,1fr)}}
    .card{background:var(--elev);border:1px solid var(--line);border-radius:18px;overflow:hidden}
    .shadow{box-shadow:var(--shadow)}

    /* Header */
    header.site{
      position:sticky; top:0; z-index:40; background:#fff; border-bottom:1px solid var(--line);
      transition:padding .18s ease, box-shadow .18s ease;
    }
    .header-wrap{display:flex;flex-direction:column;align-items:center;gap:8px;padding:var(--header-pad-y) 0}
    .brand-stack{display:flex;flex-direction:column;align-items:center;gap:6px}
    .brand-stack img{height:var(--header-logo);width:auto;transition:height .18s ease}
    .brand-title{font:800 var(--header-title)/1 Poppins,system-ui;text-align:center;transition:font-size .18s ease}
    .flag-mx{margin-top:2px}
    .flag-mx svg{width:22px;height:14px;display:block}
    nav.menu{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-top:6px}
    nav.menu a{
      padding:6px 10px;border-radius:10px;color:#333;font-size:14px;border:1px solid transparent;
      transition:background .15s ease, border-color .15s ease, box-shadow .15s ease;
    }
    /* ESTILO BASE DE ACENTO (referencia) */
    .is-accent:hover,
    .is-accent.is-active,
    nav.menu a:hover{
      background:var(--accent-weak);
      border-color:var(--accent);
      box-shadow:inset 0 0 0 2px var(--accent-weak);
    }
    nav.menu a:focus-visible{outline:2px solid var(--accent)}
    #cartBtn{font-weight:700}

    /* Header compacto */
    @media(max-width:640px){
      :root{ --header-pad-y:8px; --header-logo:60px; --header-title:18px;}
      nav.menu{gap:8px}
      nav.menu a{padding:5px 8px;font-size:13px}
    }
    header.site.is-scrolled{ box-shadow:0 6px 18px rgba(0,0,0,.06); }
    header.site.is-scrolled .brand-stack img{height:52px}
    header.site.is-scrolled .brand-title{font-size:18px}
    header.site.is-scrolled .header-wrap{padding:8px 0}

    /* Compensación header fijo */
    section{scroll-margin-top:calc(var(--header-h) + 8px); content-visibility:auto; contain-intrinsic-size:auto 600px;}

    /* Hero */
    .hero{border-bottom:1px solid var(--line);background:#fff}
    .hero .wrap{display:flex;flex-direction:column;align-items:center;gap:14px;padding:36px 0}
    .hero .logo-big img{width:340px;height:auto}
    @media(min-width:1100px){.hero .logo-big img{width:400px}}
    @media(max-width:520px){.hero .logo-big img{width:220px}}
    h1{font-family:Poppins,system-ui;font-weight:800;letter-spacing:.2px;font-size:clamp(30px,5vw,52px);line-height:1.04;margin:.05em 0 .1em;text-align:center}
    .hero-sub{font-size:clamp(14px,2.2vw,18px);color:#333;margin:2px 0 6px;text-align:center}
    h2{font-size:clamp(22px,3.6vw,34px);margin:0 0 10px;text-align:center}
    .sub{color:var(--muted);text-align:center}
    .chips-row{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:center;margin-top:14px}
    .chip{display:inline-flex;align-items:center;gap:8px;background:#fff;border:1px solid var(--line);color:#333;padding:8px 12px;border-radius:12px;white-space:nowrap}

    /* PayPal */
    .paypal-row{display:flex;justify-content:center;margin-top:12px}
    .pp-badge{display:inline-flex;align-items:center;gap:10px;background:#fff;border:1px solid var(--line);border-radius:999px;padding:10px 16px}
    .pp-badge img{height:22px;display:block}

    /* Categorías */
    #categorias h2,#categorias .sub{text-align:center}
    .tile{position:relative;border-radius:16px;overflow:hidden;border:1px solid var(--line);background:#fff;cursor:pointer;transition:box-shadow .15s, outline-color .15s}
    .tile img{width:100%;height:200px;object-fit:cover}
    .tile .label{position:absolute;left:50%;bottom:10px;transform:translateX(-50%);background:#000000b3;padding:8px 10px;border-radius:10px;color:#fff;font-weight:800}
    .tile:hover{outline:2px solid var(--accent); box-shadow:inset 0 0 0 2px var(--accent-weak)}

    /* Productos + filtros */
    #productos .filters{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;margin:12px 0 6px}
    .pill{
      border:1px solid #000;background:#fff;border-radius:999px;padding:8px 12px;cursor:pointer;
      transition:border-color .15s, box-shadow .15s, background .15s;
    }
    .pill.is-active, .pill:hover{background:var(--accent-weak);border-color:var(--accent);box-shadow:inset 0 0 0 2px var(--accent-weak)}
    .prod{display:flex;flex-direction:column;cursor:pointer;transition:box-shadow .15s, outline-color .15s}
    .prod img{aspect-ratio:1/1;object-fit:cover;background:#f4f4f4}
    .prod .pad{padding:12px}
    .prod .title{font-weight:700;line-height:1.25;margin:0 0 6px;font-size:16px}
    .prod .meta{display:flex;justify-content:space-between;align-items:center}
    .price-badge{display:inline-block;background:var(--accent-weak);border:1px solid var(--accent);border-radius:999px;padding:6px 10px;font-weight:800}
    .stars{color:#000;font-size:13px}
    .prod:hover{outline:2px solid var(--accent); box-shadow:inset 0 0 0 2px var(--accent-weak)}
    .hidden{display:none !important}

    /* Botones (unificados) */
    .btn{
      display:inline-flex;align-items:center;gap:8px;
      background:#fff;color:#000;border:1px solid #000;border-radius:12px;padding:10px 14px;cursor:pointer;
      transition:background .15s,border-color .15s, box-shadow .15s;
    }
    .btn:hover{background:var(--accent-weak);border-color:var(--accent);box-shadow:inset 0 0 0 2px var(--accent-weak)}
    .btn.secondary{background:#fff;color:#000;border-color:#000}
    .btn.secondary:hover{background:var(--accent-weak);border-color:var(--accent);box-shadow:inset 0 0 0 2px var(--accent-weak)}
    .close{border:none;background:#f3f3f3;border-radius:10px;padding:8px 10px;cursor:pointer}

    /* Modal producto */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:16px;z-index:60}
    .modal.open{display:flex}
    .modal-card{background:#fff;border-radius:18px;max-width:920px;width:96%;max-height:92vh;display:flex;flex-direction:column;overflow:hidden;border:1px solid var(--line)}
    .modal-head{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border-bottom:1px solid var(--line)}
    .modal-title{font:700 18px/1.2 Poppins,system-ui}
    .modal-body{display:grid;gap:14px;padding:14px;overflow:auto}
    @media(min-width:900px){.modal-body{grid-template-columns:1.05fr .95fr}}
    .media-wrap{position:relative}
    .m-main{width:100%;max-height:48vh;object-fit:contain;border-radius:12px;background:#f7f7f7;cursor:zoom-in}
    .m-main.is-loading{background:linear-gradient(90deg,#f3f3f3 25%,#e9e9e9 37%,#f3f3f3 63%);background-size:400% 100%;animation:sheen 1.2s infinite}
    @keyframes sheen{0%{background-position:100% 0}100%{background-position:0 0}}
    .nav-arrow{position:absolute;top:50%;transform:translateY(-50%);background:#ffffffcc;border:1px solid var(--line);border-radius:12px;padding:8px 10px;cursor:pointer}
    .nav-arrow.prev{left:8px}
    .nav-arrow.next{right:8px}
    .thumbs{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:8px}
    .thumbs img{width:100%;height:70px;object-fit:cover;border-radius:10px;border:2px solid transparent;cursor:pointer;background:#fafafa}
    .thumbs img.active{border-color:#000}

    /* Detalles elegantes en modal producto */
    .badge-price{
      display:inline-block; background:var(--accent-weak); border:1px solid var(--accent);
      border-radius:999px; padding:8px 12px; font:800 20px/1 Poppins,system-ui; margin:0 0 12px;
    }
    .features{list-style:none;padding:0;margin:0 0 16px}
    .features li{position:relative;padding-left:22px;margin:6px 0}
    .features li::before{
      content:""; position:absolute; left:0; top:7px; width:10px; height:10px; border-radius:50%;
      background:var(--accent-weak); border:1px solid var(--accent);
    }

    /* Lightbox */
    .lightbox{position:fixed;inset:0;background:#000000eb;display:none;align-items:center;justify-content:center;z-index:80;touch-action:none}
    .lightbox.open{display:flex}
    .lightbox img{max-width:95vw;max-height:95vh;object-fit:contain;transform-origin:center center;transition:transform .06s linear}
    .lightbox .x{position:absolute;top:14px;right:14px;background:#ffffff22;color:#fff;border:1px solid #ffffff55;border-radius:10px;padding:8px 10px;cursor:pointer}
    .lightbox .arrow{position:absolute;top:50%;transform:translateY(-50%);background:#ffffff22;color:#fff;border:1px solid #ffffff55;border-radius:10px;padding:10px 12px;cursor:pointer}
    .lightbox .arrow.prev{left:14px}
    .lightbox .arrow.next{right:14px}

    /* Carrito + acentos rojos */
    .cart{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center;padding:16px;z-index:65}
    .cart.open{display:flex}
    .cart-card{background:#fff;border-radius:18px;max-width:760px;width:96%;max-height:92vh;display:flex;flex-direction:column;overflow:hidden;border:1px solid var(--line)}
    .cart-head{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid var(--line)}
    .cart-head strong{font:700 18px/1.2 Poppins,system-ui}
    .cart-body{padding:12px 16px;overflow:auto}
    .cart-item{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;border-bottom:1px solid var(--line);padding:10px 0}
    .cart-item img{width:60px;height:60px;object-fit:cover;border-radius:10px}
    .cart-item .qtyline{display:inline-flex;align-items:center;border:1px solid var(--line);border-radius:10px;overflow:hidden}
    .cart-item .qtyline button{background:#f6f6f6;border:none;padding:6px 10px;cursor:pointer}
    .cart-item .qtyline button:hover{background:var(--accent-weak);border-left:1px solid var(--accent)}
    .cart-item .qtyline input{width:44px;text-align:center;border:none;padding:6px}
    .cart-foot{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-top:1px solid var(--line);gap:10px;flex-wrap:wrap}
    #cTotal{
      display:inline-block;background:var(--accent-weak);border:1px solid var(--accent);border-radius:999px;padding:6px 10px;
    }

    /* Trust bar */
    .trustbar{display:flex;flex-wrap:wrap;justify-content:center;gap:10px}

    /* Footer */
    footer.site{margin-top:48px;border-top:1px solid var(--line);background:#fff}
    .footer-head{display:flex;flex-direction:column;align-items:center;gap:6px;padding:18px 0 6px}
    .footer-head img{height:72px;width:auto}
    .footer-name{font:800 18px/1.1 Poppins,system-ui;text-align:center}
    .footer-tag{color:#666;text-align:center;margin-top:2px}
    .copy{padding:10px 0 20px;color:#666;text-align:center}
    .footer-legal{display:flex;gap:8px;align-items:center;justify-content:center;flex-wrap:wrap}
    .footer-legal .dot{opacity:.35}
    .footer-legal a{
      padding:4px 6px;border-radius:8px;border:1px solid transparent;transition:background .15s,border-color .15s, box-shadow .15s;
    }
    .footer-legal a:hover{
      background:var(--accent-weak); border-color:var(--accent); box-shadow:inset 0 0 0 2px var(--accent-weak);
    }

    /* Contacto */
    .contact-grid{display:grid;gap:16px;grid-template-columns:1fr;max-width:900px;margin:16px auto 0}
    @media(min-width:900px){.contact-grid{grid-template-columns:repeat(3,1fr)}}
    .contact-item{border:1px solid var(--line);border-radius:16px;padding:18px 16px;text-align:center;transition:box-shadow .15s, outline-color .15s}
    .contact-item strong{display:block;font:700 18px/1.2 Poppins,system-ui;margin-bottom:8px}
    .contact-item .sub{line-height:1.6;margin-bottom:12px}
    .contact-item a.btn{display:inline-block;margin-top:2px}
    .contact-item:hover{outline:2px solid var(--accent); box-shadow:inset 0 0 0 2px var(--accent-weak)}

    /* FAQ con sombreado rojo */
    #faq details{border:1px solid var(--line);border-radius:12px;margin:10px 0;padding:10px;background:#fff;transition:box-shadow .15s,border-color .15s}
    #faq details:hover{border-color:var(--accent); box-shadow:inset 0 0 0 2px var(--accent-weak)}
    #faq summary{cursor:pointer;font-weight:700}
    #faq .answer{margin-top:8px}

    /* WhatsApp flotante — SOLO PNG */
    .floating-wa{
      position:fixed; right:16px; bottom:16px; width:64px; height:64px; display:flex; align-items:center; justify-content:center; z-index:45; cursor:pointer;
    }
    .floating-wa img{ width:64px; height:64px; display:block; }
  </style>

  <!-- FUNCIONES GLOBALES PARA MODALES (defensivas y disponibles desde el principio) -->
  <script>
    (function(){
      // Contenido legal global:
      window.MU_LEGAL = {
        envios: {
          title: 'Política de Envíos — MotoUrbano MX',
          body: '<p>Realizamos envíos a todo México mediante mensajería certificada. Los tiempos estimados son de <strong>10 a 20 días hábiles</strong> según tu zona.</p>'
              + '<p>Al procesar tu pedido te compartiremos la <strong>guía</strong> por correo para que des seguimiento.</p>'
              + '<p>Ante retrasos por paquetería o fuerza mayor, te mantendremos informado y daremos soporte.</p>'
              + '<p class="sub">Contacto: <a href="mailto:hola@motourbano.shop">hola@motourbano.shop</a></p>'
        },
        devoluciones: {
          title: 'Política de Devoluciones — MotoUrbano MX',
          body: '<p>Cuentas con <strong>14 días naturales</strong> desde la recepción para solicitar devolución.</p>'
              + '<p>El artículo debe estar en su <strong>estado original</strong>, sin uso y con empaques/etiquetas completos. Puede solicitarse evidencia fotográfica.</p>'
              + '<p>Escríbenos a <a href="mailto:hola@motourbano.shop">hola@motourbano.shop</a> o por WhatsApp indicando tu <strong>número de pedido</strong>.</p>'
              + '<p>Tras recibir y validar el producto, gestionamos el reembolso por el mismo medio de pago.</p>'
        },
        privacidad: {
          title: 'Aviso de Privacidad — MotoUrbano MX',
          body: '<p>Tratamos datos personales para <strong>gestión de pedidos</strong>, <strong>atención al cliente</strong> y comunicaciones relacionadas.</p>'
              + '<p>Protegemos tus datos con medidas razonables. Sólo los compartimos con terceros necesarios (paquetería, pasarela de pago) u obligación legal.</p>'
              + '<p>Ejercer ARCO: <a href="mailto:hola@motourbano.shop">hola@motourbano.shop</a>.</p>'
        },
        terminos: {
          title: 'Términos y Condiciones — MotoUrbano MX',
          body: '<p>El uso de este sitio implica la aceptación de estos términos. Precios y disponibilidad pueden cambiar sin previo aviso.</p>'
              + '<p>Imágenes ilustrativas. En caso de error o falta de inventario, se podrá cancelar con reembolso íntegro.</p>'
              + '<p>Para consultas: <a href="mailto:hola@motourbano.shop">hola@motourbano.shop</a>.</p>'
        }
      };

      // Abrir modal legal: crea el modal si no existe (fallback a prueba de errores).
      window.MU_openLegal = function(key){
        try{
          var data = (window.MU_LEGAL||{})[key]; if(!data) return;
          var modal = document.getElementById('legalModal');
          if(!modal){
            var wrap = document.createElement('div');
            wrap.innerHTML =
              '<div class="modal" id="legalModal" aria-hidden="true">'
            + '  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="legalTitle">'
            + '    <div class="modal-head">'
            + '      <div class="modal-title" id="legalTitle">Información legal</div>'
            + '      <button class="close" id="legalClose" aria-label="Cerrar">✕</button>'
            + '    </div>'
            + '    <div class="modal-body" id="legalBody" style="padding:16px;display:block"></div>'
            + '  </div>'
            + '</div>';
            document.body.appendChild(wrap.firstChild);
            modal = document.getElementById('legalModal');
            modal.addEventListener('click', function(e){ if(e.target===modal) modal.classList.remove('open'); });
            document.getElementById('legalClose').addEventListener('click', function(){ modal.classList.remove('open'); });
          }
          document.getElementById('legalTitle').textContent = data.title;
          document.getElementById('legalBody').innerHTML   = '<div class="sub" style="text-align:left">'+data.body+'</div>';
          modal.classList.add('open');
        }catch(err){
          console.error('MU_openLegal error:', err);
        }
        return false;
      };
    })();
  </script>
</head>
<body>
  <!-- HEADER -->
  <header class="site" id="siteHeader">
    <div class="container header-wrap">
      <div class="brand-stack">
        <img src="img/logo.png" alt="Logo MotoUrbano" fetchpriority="high"/>
        <div class="brand-title">MotoUrbano MX</div>
        <div class="flag-mx" aria-label="México">
          <svg viewBox="0 0 16 10" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Bandera de México">
            <rect width="16" height="10" fill="#fff"/>
            <rect width="5.333" height="10" x="0" y="0" fill="#006847"/>
            <rect width="5.333" height="10" x="10.667" y="0" fill="#ce1126"/>
            <circle cx="8" cy="5" r="1.2" fill="#a67c00"/>
          </svg>
        </div>
      </div>
      <nav class="menu" aria-label="Principal">
        <a href="#inicio" class="is-accent">Inicio</a>
        <a href="#categorias" class="is-accent">Categorías</a>
        <a href="#productos" class="is-accent">Productos</a>
        <a href="#faq" class="is-accent">Preguntas frecuentes</a>
        <a href="#contacto" class="is-accent">Contacto</a>
        <a href="#" id="cartBtn" class="is-accent">Carrito (<span id="cartCount">0</span>)</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section id="inicio" class="hero">
    <div class="container wrap">
      <div class="logo-big">
        <img src="img/logo.png" alt="Logo MotoUrbano" decoding="async" fetchpriority="high"/>
      </div>
      <h1>Accesorios para tu moto</h1>
      <p class="hero-sub">Pagos seguros y precios claros.</p>

      <div class="chips-row" aria-label="Sellos de confianza">
        <span class="chip">💳 Pago fácil y seguro</span>
        <span class="chip">🇲🇽 Envío a todo el país</span>
        <span class="chip">🔄 Devolución en 14 días</span>
        <span class="chip">🎁 Envío gratis</span>
      </div>

      <div class="paypal-row">
        <span class="pp-badge" title="Pago seguro con PayPal" aria-label="Pago seguro con PayPal">
          <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal" loading="lazy" decoding="async"/>
        </span>
      </div>
    </div>
  </section>

  <!-- CATEGORÍAS -->
  <section id="categorias" class="container" style="padding:26px 0">
    <h2>Categorías</h2>
    <p class="sub">Encuentra rápido lo que necesitas para el día a día.</p>

    <div class="grid cols-2 cols-5">
      <div class="tile shadow js-cat" data-cat="soportes" title="Soportes de móvil">
        <img src="img/cat-soportes.jpg" alt="Soportes de móvil" loading="lazy" decoding="async"/><span class="label">Soportes</span>
      </div>
      <div class="tile shadow js-cat" data-cat="guantes" title="Guantes">
        <img src="img/cat-guantes.jpg" alt="Guantes" loading="lazy" decoding="async"/><span class="label">Guantes</span>
      </div>
      <div class="tile shadow js-cat" data-cat="chalecos" title="Chalecos reflectantes">
        <img src="img/cat-chalecos.jpg" alt="Chalecos" loading="lazy" decoding="async"/><span class="label">Chalecos</span>
      </div>
      <div class="tile shadow js-cat" data-cat="bolsas" title="Bolsas">
        <img src="img/cat-bolsas.jpg" alt="Bolsas" loading="lazy" decoding="async"/><span class="label">Bolsas</span>
      </div>
      <div class="tile shadow js-cat" data-cat="rinoneras" title="Riñoneras">
        <img src="img/cat-rinoneras.jpg" alt="Riñoneras" loading="lazy" decoding="async"/><span class="label">Riñoneras</span>
      </div>
    </div>
  </section>

  <!-- TRUST BAR -->
  <section class="container" style="padding:6px 0 16px">
    <div class="card shadow" style="padding:12px">
      <div class="trustbar">
        <span class="chip">🔒 Pago 100% seguro</span>
        <span class="chip">🧭 Rastreo con número de guía</span>
        <span class="chip">💬 Atención por WhatsApp</span>
      </div>
    </div>
  </section>

  <!-- PRODUCTOS -->
  <section id="productos" class="container" style="padding:26px 0">
    <h2>Productos</h2>
    <p class="sub">Selección pensada para la ciudad.</p>

    <div class="filters" id="filters">
      <button class="pill is-accent is-active" data-cat="all" type="button">Todos</button>
      <button class="pill is-accent" data-cat="soportes" type="button">Soportes</button>
      <button class="pill is-accent" data-cat="guantes" type="button">Guantes</button>
      <button class="pill is-accent" data-cat="chalecos" type="button">Chalecos</button>
      <button class="pill is-accent" data-cat="bolsas" type="button">Bolsas</button>
      <button class="pill is-accent" data-cat="rinoneras" type="button">Riñoneras</button>
    </div>

    <div class="grid cols-2 cols-4" id="gridProds" style="margin-top:12px">
      <!-- Soporte -->
      <article class="card prod shadow"
        data-cat="soportes"
        data-name="Soporte manillar antivibración"
        data-price="$499 MXN"
        data-desc="Sujeción firme · Absorción de vibraciones · Compatible con la mayoría de manillares"
        data-main="img/cat-soportes.jpg"
        data-gallery='["img/soporte-antivibracion-01.jpg","img/soporte-antivibracion-02.jpg","img/soporte-antivibracion-03.jpg","img/soporte-antivibracion-04.jpg"]'>
        <img src="img/cat-soportes.jpg" alt="Soporte manillar antivibración" decoding="async" loading="lazy"/>
        <div class="pad">
          <div class="title">Soporte manillar antivibración</div>
          <div class="meta">
            <span class="price-badge">$499 MXN</span>
            <span class="stars">★★★★★ <span style="opacity:.7">(demo)</span></span>
          </div>
        </div>
      </article>

      <!-- Guantes -->
      <article class="card prod shadow"
        data-cat="guantes"
        data-name="Guantes impermeables táctiles"
        data-price="$649 MXN"
        data-desc="Impermeables · Dedos táctiles · Refuerzos en palma"
        data-main="img/cat-guantes.jpg"
        data-gallery='["img/guantes-urbanos-verano-01.jpg","img/guantes-urbanos-verano-02.jpg"]'>
        <img src="img/cat-guantes.jpg" alt="Guantes impermeables táctiles" decoding="async" loading="lazy"/>
        <div class="pad">
          <div class="title">Guantes impermeables táctiles</div>
          <div class="meta">
            <span class="price-badge">$649 MXN</span>
            <span class="stars">★★★★★ <span style="opacity:.7">(demo)</span></span>
          </div>
        </div>
      </article>

      <!-- Chaleco -->
      <article class="card prod shadow"
        data-cat="chalecos"
        data-name="Chaleco reflectante"
        data-price="$299 MXN"
        data-desc="Alta visibilidad · Ajuste sencillo · Ligero"
        data-main="img/cat-chalecos.jpg"
        data-gallery='["img/chaleco-fosforito-01.jpg","img/chaleco-fosforito-02.jpg"]'>
        <img src="img/cat-chalecos.jpg" alt="Chaleco reflectante" decoding="async" loading="lazy"/>
        <div class="pad">
          <div class="title">Chaleco reflectante</div>
          <div class="meta">
            <span class="price-badge">$299 MXN</span>
            <span class="stars">★★★★★ <span style="opacity:.7">(demo)</span></span>
          </div>
        </div>
      </article>

      <!-- Riñonera -->
      <article class="card prod shadow"
        data-cat="rinoneras"
        data-name="Riñonera impermeable"
        data-price="$549 MXN"
        data-desc="Impermeable · Cierre seguro · Bolsillos internos"
        data-main="img/cat-rinoneras.jpg"
        data-gallery='["img/rinonera-impermeable-01.jpg","img/rinonera-impermeable-02.jpg","img/rinonera-impermeable-03.jpg","img/rinonera-impermeable-04.jpg","img/rinonera-impermeable-05.jpg"]'>
        <img src="img/cat-rinoneras.jpg" alt="Riñonera impermeable" decoding="async" loading="lazy"/>
        <div class="pad">
          <div class="title">Riñonera impermeable</div>
          <div class="meta">
            <span class="price-badge">$549 MXN</span>
            <span class="stars">★★★★★ <span style="opacity:.7">(demo)</span></span>
          </div>
        </div>
      </article>

      <!-- Bolsa trasera -->
      <article class="card prod shadow"
        data-cat="bolsas"
        data-name="Bolsa trasera impermeable"
        data-price="$799 MXN"
        data-desc="Montaje rápido · Resistente al agua · Capacidad ampliable"
        data-main="img/cat-bolsas.jpg"
        data-gallery='["img/bolsa-trasera-impermeable-01.jpg","img/bolsa-trasera-impermeable-02.jpg"]'>
        <img src="img/cat-bolsas.jpg" alt="Bolsa trasera impermeable" decoding="async" loading="lazy"/>
        <div class="pad">
          <div class="title">Bolsa trasera impermeable</div>
          <div class="meta">
            <span class="price-badge">$799 MXN</span>
            <span class="stars">★★★★★ <span style="opacity:.7">(demo)</span></span>
          </div>
        </div>
      </article>
    </div>
  </section>

  <!-- PREGUNTAS FRECUENTES -->
  <section id="faq" class="container" style="padding:26px 0 10px">
    <h2>Preguntas frecuentes</h2>
    <div class="card shadow" style="padding:12px">
      <details>
        <summary>¿Cuánto tarda el envío?</summary>
        <div class="sub answer">Entre 10 y 20 días hábiles según la zona. Te compartimos la guía para darle rastreo.</div>
      </details>
      <details>
        <summary>¿Cómo funcionan las devoluciones?</summary>
        <div class="sub answer">Tienes 14 días desde la entrega. Escríbenos por WhatsApp con tu número de pedido y te guiamos.</div>
      </details>
      <details>
        <summary>¿Qué métodos de pago aceptan?</summary>
        <div class="sub answer">PayPal y tarjetas bancarias. Pronto añadiremos más opciones.</div>
      </details>
      <details>
        <summary>¿Puedo pedir factura?</summary>
        <div class="sub answer">Sí. Envíanos tus datos fiscales a <strong>hola@motourbano.shop</strong> junto con el número de pedido.</div>
      </details>
      <details>
        <summary>¿Los productos tienen garantía?</summary>
        <div class="sub answer">Sí, garantía de 6 meses por defectos de fábrica.</div>
      </details>
    </div>
  </section>

  <!-- CONTACTO -->
  <section id="contacto" class="container" style="padding:10px 0 36px">
    <h2>Contacto</h2>
    <p class="sub">¿Tienes dudas? Escríbenos y con gusto te ayudamos.</p>
    <div class="contact-grid">
      <div class="contact-item">
        <strong>Email</strong>
        <div class="sub">hola@motourbano.shop</div>
        <a class="btn secondary" href="mailto:hola@motourbano.shop?subject=Consulta%20MotoUrbano%20MX">Enviar correo</a>
      </div>
      <div class="contact-item">
        <strong>WhatsApp</strong>
        <div class="sub">Lun a Vie · 10:00–18:00</div>
        <a class="btn secondary" href="https://wa.me/520000000000" target="_blank" rel="noopener">Abrir WhatsApp</a>
      </div>
      <div class="contact-item">
        <strong>Devoluciones</strong>
        <div class="sub">Plazo de 14 días</div>
        <a class="btn secondary" href="#!" onclick="return MU_openLegal('devoluciones');">Ver política</a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="site">
    <div class="container footer-head">
      <img src="img/logo.png" alt="MotoUrbano" loading="lazy" decoding="async"/>
      <div class="footer-name">MotoUrbano MX</div>
      <div class="footer-tag">Accesorios urbanos, prácticos y fiables. Envío a todo México.</div>
    </div>

    <div class="container footer-legal" style="padding-bottom:6px">
      <a href="#!" onclick="return MU_openLegal('envios');">Envíos</a><span class="dot">·</span>
      <a href="#!" onclick="return MU_openLegal('devoluciones');">Devoluciones</a><span class="dot">·</span>
      <a href="#!" onclick="return MU_openLegal('privacidad');">Privacidad</a><span class="dot">·</span>
      <a href="#!" onclick="return MU_openLegal('terminos');">Términos</a>
    </div>

    <div class="container copy">
      <small>© <span id="year"></span> MotoUrbano MX</small>
    </div>
  </footer>

  <!-- WhatsApp flotante -->
  <a class="floating-wa" href="https://wa.me/520000000000" target="_blank" rel="noopener" aria-label="WhatsApp">
    <img src="img/whatsapp.png" alt="WhatsApp" width="64" height="64" decoding="async" loading="lazy">
  </a>

  <!-- MODAL Producto -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="mTitle">
      <div class="modal-head">
        <div class="modal-title" id="mTitle">Producto</div>
        <button class="close" id="mClose" aria-label="Cerrar">✕</button>
      </div>
      <div class="modal-body">
        <div class="media-wrap">
          <img id="mMain" class="m-main" src="" alt="" />
          <button class="nav-arrow prev" id="mPrev" aria-label="Anterior">‹</button>
          <button class="nav-arrow next" id="mNext" aria-label="Siguiente">›</button>
          <div id="mThumbs" class="thumbs"></div>
        </div>
        <div>
          <div id="mPrice" class="badge-price"></div>
          <ul id="mDesc" class="features"></ul>
          <div style="display:flex;align-items:center;gap:12px;margin-bottom:14px">
            <div class="qty">
              <button type="button" id="qMinus">−</button>
              <input type="number" id="qInput" value="1" min="1" />
              <button type="button" id="qPlus">+</button>
            </div>
            <button class="btn" id="mAdd">Añadir al carrito</button>
          </div>
          <div class="sub" style="font-size:12px">Pago seguro con PayPal · Envío a todo México · Devoluciones 14 días</div>
        </div>
      </div>
    </div>
  </div>

  <!-- LIGHTBOX -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <button class="x" id="lbClose" aria-label="Cerrar">✕</button>
    <button class="arrow prev" id="lbPrev" aria-label="Anterior">‹</button>
    <img id="lbImg" src="" alt="Imagen ampliada"/>
    <button class="arrow next" id="lbNext" aria-label="Siguiente">›</button>
  </div>

  <!-- MODAL Carrito -->
  <div class="cart" id="cart" aria-hidden="true">
    <div class="cart-card" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
      <div class="cart-head">
        <strong id="cartTitle">Carrito</strong>
        <button class="close" id="cClose" aria-label="Cerrar">✕</button>
      </div>
      <div class="cart-body" id="cBody"></div>
      <div class="cart-foot">
        <strong>Total: <span id="cTotal">$0 MXN</span></strong>
        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
          <button class="btn secondary" id="cClear" type="button">Vaciar</button>
          <!-- PayPal Standard: cambia tu correo abajo -->
          <form id="ppForm" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
            <input type="hidden" name="cmd" value="_xclick">
            <input type="hidden" name="business" id="ppBusiness" value="">
            <input type="hidden" name="item_name" value="Pedido MotoUrbano MX">
            <input type="hidden" name="amount" id="ppAmount" value="0.00">
            <input type="hidden" name="currency_code" value="MXN">
            <button type="submit" class="btn">Pagar con PayPal / Tarjeta</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL Legales (creado si hiciera falta por MU_openLegal) -->
  <div class="modal" id="legalModal" aria-hidden="true" style="display:none">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="legalTitle">
      <div class="modal-head">
        <div class="modal-title" id="legalTitle">Información legal</div>
        <button class="close" id="legalClose" aria-label="Cerrar">✕</button>
      </div>
      <div class="modal-body" id="legalBody" style="padding:16px;display:block"></div>
    </div>
  </div>

  <!-- TOAST -->
  <div class="toast" id="toast" style="position:fixed;left:50%;bottom:24px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.2);opacity:0;pointer-events:none;transition:opacity .25s, transform .25s;z-index:90">
    Añadido al carrito
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function(){
      var $ = function(sel,ctx){ return (ctx||document).querySelector(sel); };
      var $$= function(sel,ctx){ return [].slice.call((ctx||document).querySelectorAll(sel)); };

      /* ===== Header compacto y compensación dinámica ===== */
      const header = $('#siteHeader');
      function updateHeaderUi(){
        const sc = window.scrollY||window.pageYOffset;
        header.classList.toggle('is-scrolled', sc>8);
        const h = header.getBoundingClientRect().height;
        document.documentElement.style.setProperty('--header-h', h+'px');
      }
      updateHeaderUi();
      window.addEventListener('scroll', updateHeaderUi, {passive:true});
      window.addEventListener('resize', updateHeaderUi);

      function scrollToId(id){
        const el = document.querySelector(id);
        if(!el) return;
        const headerH = header.getBoundingClientRect().height;
        const y = el.getBoundingClientRect().top + window.pageYOffset - headerH - 6;
        window.scrollTo({top:y, behavior:'smooth'});
      }

      var y = $('#year'); if(y) y.textContent = new Date().getFullYear();

      /* ===== FILTROS ===== */
      var filterPills = $$('#filters .pill');
      var prodCards   = $$('#gridProds [data-cat]');
      function applyFilter(cat){
        filterPills.forEach(function(p){ p.classList.toggle('is-active', p.dataset.cat===cat); });
        prodCards.forEach(function(card){ card.classList.toggle('hidden', !(cat==='all' || card.dataset.cat===cat)); });
        scrollToId('#productos');
      }
      filterPills.forEach(function(p){ p.addEventListener('click', function(){ applyFilter(p.dataset.cat); }); });
      $$('.js-cat').forEach(function(tile){ tile.addEventListener('click', function(){ applyFilter(tile.dataset.cat); }); });

      /* ===== MODAL PRODUCTO ===== */
      var modal=$('#modal'), mTitle=$('#mTitle'), mPrice=$('#mPrice'),
          mMain=$('#mMain'), mThumbs=$('#mThumbs'),
          mPrev=$('#mPrev'), mNext=$('#mNext'), mClose=$('#mClose'),
          qMinus=$('#qMinus'), qPlus=$('#qPlus'), qInput=$('#qInput'),
          mAdd=$('#mAdd'), mDesc=$('#mDesc');

      var lightbox=$('#lightbox'), lbImg=$('#lbImg'), lbClose=$('#lbClose'),
          lbPrev=$('#lbPrev'), lbNext=$('#lbNext');

      var toast=$('#toast');
      var current={images:[],index:0,name:'',priceText:'',price:0};

      function bullets(text){ return (text||'').split('·').map(function(s){return s.trim();}).filter(Boolean); }
      function setActiveThumb(){ $$('#mThumbs img').forEach(function(t){ t.classList.toggle('active', t.src===mMain.src); }); }
      function showImage(idx){
        if(!current.images.length) return;
        current.index=(idx+current.images.length)%current.images.length;
        mMain.classList.add('is-loading');
        var nextSrc=current.images[current.index];
        var im=new Image(); im.decoding='async'; im.onload=function(){
          mMain.src=nextSrc; mMain.alt=current.name; mMain.classList.remove('is-loading'); setActiveThumb();
        }; im.src=nextSrc;
      }

      function openModal(card){
        var gallery=[];
        try{ gallery=JSON.parse(card.getAttribute('data-gallery')||'[]'); }catch(e){ gallery=[]; }
        current={
          name:card.dataset.name,
          priceText:card.dataset.price,
          price:parseInt((card.dataset.price||'').replace(/[^0-9]/g,''),10)||0,
          main:card.getAttribute('data-main')||'',
          images:[],index:0
        };
        current.images=[current.main].concat(gallery.filter(Boolean));
        mTitle.textContent=current.name||'Producto';
        mPrice.textContent=current.priceText||'';
        mMain.classList.remove('is-loading');
        mMain.src=current.images[0]; mMain.alt=current.name;

        mThumbs.innerHTML=current.images.map(function(src,i){
          return '<img src="'+src+'" alt="Vista '+(i+1)+' '+current.name+'" loading="lazy" decoding="async">';
        }).join('');
        setActiveThumb();

        mThumbs.onclick=function(e){
          var img=e.target.closest('img'); if(!img) return;
          var idx=current.images.indexOf(img.src);
          if(idx>-1){ showImage(idx); openLightbox(img.src, img.alt); }
        };
        mMain.onclick=function(){ openLightbox(mMain.src, mMain.alt); };
        mPrev.onclick=function(){ showImage(current.index-1); };
        mNext.onclick=function(){ showImage(current.index+1); };

        // Swipe básico
        var sx=0,sy=0,dx=0,dy=0;
        mMain.addEventListener('touchstart',function(ev){ if(ev.touches.length!==1)return; sx=ev.touches[0].clientX; sy=ev.touches[0].clientY; },{passive:true});
        mMain.addEventListener('touchmove',function(ev){ if(ev.touches.length!==1)return; dx=ev.touches[0].clientX-sx; dy=ev.touches[0].clientY-sy; },{passive:true});
        mMain.addEventListener('touchend',function(){ if(Math.abs(dx)>40 && Math.abs(dy)<40){ if(dx<0)showImage(current.index+1); else showImage(current.index-1);} dx=dy=0; },{passive:true});

        // Descripción (estilo features elegante)
        mDesc.innerHTML=bullets(card.dataset.desc||'').map(function(li){return '<li>'+li+'</li>';}).join('');

        qInput.value=1;
        modal.classList.add('open');

        current.images.slice(1).forEach(function(src){ var i=new Image(); i.decoding='async'; i.src=src; });
      }
      function closeModal(){ modal.classList.remove('open'); }
      $$('#gridProds [data-cat]').forEach(function(card){ card.addEventListener('click', function(){ openModal(card); }); });
      mClose.addEventListener('click', closeModal);
      modal.addEventListener('click', function(e){ if(e.target===modal) closeModal(); });

      qMinus.addEventListener('click', function(){ qInput.value=Math.max(1,(parseInt(qInput.value,10)||1)-1); });
      qPlus .addEventListener('click', function(){ qInput.value=(parseInt(qInput.value,10)||1)+1; });

      document.addEventListener('keydown', function(e){
        if(!modal.classList.contains('open')) return;
        if(e.key==='Escape') closeModal();
        if(e.key==='ArrowLeft') showImage(current.index-1);
        if(e.key==='ArrowRight') showImage(current.index+1);
      });

      /* ===== LIGHTBOX ===== */
      function openLightbox(src,alt){ lbImg.src=src; lbImg.alt=alt||''; scale=1; tx=0; ty=0; applyTransform(); lightbox.classList.add('open'); }
      function closeLightbox(){ lightbox.classList.remove('open'); }
      window.openLightbox = openLightbox;
      lbClose.addEventListener('click', closeLightbox);
      lbPrev.addEventListener('click', function(){ showImage(current.index-1); lbImg.src=current.images[current.index]; });
      lbNext.addEventListener('click', function(){ showImage(current.index+1); lbImg.src=current.images[current.index]; });
      lightbox.addEventListener('click', function(e){ if(e.target===lightbox) closeLightbox(); });

      var scale=1, tx=0, ty=0;
      function applyTransform(){ lbImg.style.transform='translate('+tx+'px,'+ty+'px) scale('+scale+')'; }
      lightbox.addEventListener('wheel', function(e){
        e.preventDefault();
        var d=e.deltaY>0?-0.1:0.1; scale=Math.max(1,Math.min(5,scale+d)); applyTransform();
      }, {passive:false});
      var startDist=0,startScale=1,startX=0,startY=0;
      lightbox.addEventListener('touchstart', function(e){
        if(e.touches.length===2){
          startDist=Math.hypot(e.touches[0].clientX-e.touches[1].clientX, e.touches[0].clientY-e.touches[1].clientY);
          startScale=scale;
        }else if(e.touches.length===1){ startX=e.touches[0].clientX-tx; startY=e.touches[0].clientY-ty; }
      }, {passive:true});
      lightbox.addEventListener('touchmove', function(e){
        if(e.touches.length===2){
          var d=Math.hypot(e.touches[0].clientX-e.touches[1].clientX, e.touches[0].clientY-e.touches[1].clientY);
          scale=Math.max(1,Math.min(5,startScale*(d/startDist))); applyTransform();
        }else if(e.touches.length===1 && scale>1){
          tx=e.touches[0].clientX-startX; ty=e.touches[0].clientY-startY; applyTransform();
        }
      }, {passive:true});
      var lastTap=0;
      lightbox.addEventListener('touchend', function(){
        var now=Date.now(); if(now-lastTap<300){ scale=1; tx=0; ty=0; applyTransform(); } lastTap=now;
      });

      /* ===== CARRITO ===== */
      var cartBtn=$('#cartBtn'), cartModal=$('#cart'), cClose=$('#cClose'),
          cBody=$('#cBody'), cTotal=$('#cTotal'), cClear=$('#cClear'),
          ppAmount=$('#ppAmount'), ppBusiness=$('#ppBusiness');
      var PAYPAL_BUSINESS='tu-correo-paypal@ejemplo.com'; ppBusiness.value=PAYPAL_BUSINESS;

      var STORAGE_KEY='mu_cart';
      function readCart(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)||'[]'); }catch(e){ return []; } }
      function writeCart(items){ localStorage.setItem(STORAGE_KEY, JSON.stringify(items)); }
      function cartSum(items){ return items.reduce(function(s,i){ return s+i.price*i.qty; },0); }
      function updateCount(){ var items=readCart(); var n=items.reduce(function(s,i){return s+i.qty;},0); $('#cartCount').textContent=n; }

      function renderCart(){
        var items=readCart();
        if(items.length===0){
          cBody.innerHTML='<p class="sub">Tu carrito está vacío.</p>';
        }else{
          cBody.innerHTML=items.map(function(i,idx){
            return '<div class="cart-item">'
              +'<img src="'+i.img+'" alt="'+i.name+'" loading="lazy" decoding="async">'
              +'<div><div style="font-weight:700">'+i.name+'</div><div class="sub">$'+i.price+' MXN c/u</div></div>'
              +'<div style="display:flex;align-items:center;gap:8px">'
              +  '<div class="qtyline">'
              +    '<button data-act="minus" data-idx="'+idx+'">−</button>'
              +    '<input type="number" min="1" value="'+i.qty+'" data-idx="'+idx+'" data-act="input" />'
              +    '<button data-act="plus" data-idx="'+idx+'">+</button>'
              +  '</div>'
              +  '<button class="close" data-del="'+idx+'">Eliminar</button>'
              +'</div>'
              +'</div>';
          }).join('');
        }
        var total=cartSum(items);
        cTotal.textContent='$'+total+' MXN';
        ppAmount.value=Number(total).toFixed(2);
      }
      function openCart(){ renderCart(); cartModal.classList.add('open'); }
      function closeCart(){ cartModal.classList.remove('open'); }
      cartBtn.addEventListener('click', function(e){ e.preventDefault(); openCart(); });
      cClose .addEventListener('click', closeCart);
      cartModal.addEventListener('click', function(e){ if(e.target===cartModal) closeCart(); });

      cBody.addEventListener('click', function(e){
        var del=e.target.closest('[data-del]');
        if(del){
          var idx=parseInt(del.dataset.del,10);
          var items=readCart(); items.splice(idx,1);
          writeCart(items); updateCount(); renderCart(); return;
        }
        var act=e.target.closest('button[data-act]');
        if(act){
          var idx=parseInt(act.dataset.idx,10);
          var items=readCart(); if(!items[idx]) return;
          if(act.dataset.act==='minus'){ items[idx].qty=Math.max(1,(items[idx].qty||1)-1); }
          if(act.dataset.act==='plus'){ items[idx].qty=(items[idx].qty||1)+1; }
          writeCart(items); updateCount(); renderCart();
        }
      });
      cBody.addEventListener('change', function(e){
        var inp=e.target.closest('input[data-act="input"]'); if(!inp) return;
        var idx=parseInt(inp.dataset.idx,10);
        var items=readCart(); if(!items[idx]) return;
        var v=Math.max(1, parseInt(inp.value,10)||1);
        items[idx].qty=v; writeCart(items); updateCount(); renderCart();
      });
      if($('#cClear')) $('#cClear').addEventListener('click', function(){ writeCart([]); updateCount(); renderCart(); });

      function showToast(){
        var t=$('#toast'); if(!t) return;
        t.classList.add('show'); t.style.opacity='1'; t.style.transform='translateX(-50%) translateY(-6px)';
        setTimeout(function(){ t.classList.remove('show'); t.style.opacity='0'; t.style.transform='translateX(-50%)'; }, 1400);
      }
      $('#mAdd').addEventListener('click', function(){
        var qty=Math.max(1, parseInt($('#qInput').value,10)||1);
        var items=readCart();
        var name=$('#mTitle').textContent;
        var price=parseInt(($('#mPrice').textContent||'').replace(/[^0-9]/g,''),10)||0;
        var img=$('#mMain').src;
        var found=items.find(function(it){ return it.name===name && it.img===img && it.price===price; });
        if(found){ found.qty+=qty; } else { items.push({name:name,price:price,img:img,qty:qty}); }
        writeCart(items); updateCount(); openCart(); closeModal(); showToast();
      });

      /* ===== Scroll de menú ===== */
      $$('.menu a[href^="#"]').forEach(function(a){
        a.addEventListener('click', function(e){
          e.preventDefault();
          const id=a.getAttribute('href');
          if(id && id.length>1){ scrollToId(id); }
        });
      });

      /* ===== Prefetch de galerías ===== */
      function prefetch(g){ g.forEach(function(src){ var i=new Image(); i.decoding='async'; i.src=src; }); }
      (window.requestIdleCallback||setTimeout)(function(){
        $$('#gridProds [data-gallery]').forEach(function(card){
          try{ var g=JSON.parse(card.getAttribute('data-gallery')||'[]'); prefetch(g); }catch(e){}
        });
      },300);
      $$('#gridProds [data-gallery]').forEach(function(card){
        card.addEventListener('mouseenter', function(){
          try{ var g=JSON.parse(card.getAttribute('data-gallery')||'[]'); prefetch(g); }catch(e){}
        }, {passive:true});
      });

      /* ===== PAYPAL email ===== */
      var ppBusiness = $('#ppBusiness'); if(ppBusiness) ppBusiness.value = 'tu-correo-paypal@ejemplo.com';

      /* ===== Enlaces legales (delegación adicional) ===== */
      document.addEventListener('click', function(e){
        const a = e.target.closest('a[data-legal], a[href="#!"]');
        if(a && (a.hasAttribute('data-legal') || a.getAttribute('href')==="#!")){
          e.preventDefault();
          const key = a.getAttribute('data-legal');
          if(key && window.MU_openLegal){ window.MU_openLegal(key); }
        }
      }, {passive:false});

      /* INIT */
      updateHeaderUi();
      if(location.hash){ setTimeout(function(){ scrollToId(location.hash); }, 50); }
      updateCount();
    });
  </script>
</body>
</html>
